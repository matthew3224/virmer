"use strict";class HystModal{constructor(e){this.config=Object.assign({backscroll:!0,linkAttributeName:"data-modal",closeOnOverlay:!0,closeOnEsc:!0,closeOnButton:!0,waitTransitions:!1,catchFocus:!0,fixedSelectors:"*[data-hystfixed]",beforeOpen:()=>{},afterClose:()=>{}},e),this.config.linkAttributeName&&this.init(),this._closeAfterTransition=this._closeAfterTransition.bind(this)}init(){this.isOpened=!1,this.openedWindow=!1,this.starter=!1,this._nextWindows=!1,this._scrollPosition=0,this._reopenTrigger=!1,this._overlayChecker=!1,this._isMoved=!1,this._focusElements=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this._modalBlock=!1;const e=document.querySelector(".hystmodal__shadow");e?this.shadow=e:(this.shadow=document.createElement("div"),this.shadow.classList.add("modal__shadow"),document.body.appendChild(this.shadow)),this.eventsFeeler()}eventsFeeler(){document.addEventListener("click",(e=>{const t=e.target.closest("[".concat(this.config.linkAttributeName,"]"));if(!this._isMoved&&t){e.preventDefault(),this.starter=t;const s=this.starter.getAttribute(this.config.linkAttributeName);return this._nextWindows=document.querySelector(s),void this.open()}this.config.closeOnButton&&e.target.closest("[data-modalClose]")&&this.close()})),this.config.closeOnOverlay&&(document.addEventListener("mousedown",(e=>{!this._isMoved&&e.target instanceof Element&&!e.target.classList.contains("modal__wrap")||(this._overlayChecker=!0)})),document.addEventListener("mouseup",(e=>{if(!this._isMoved&&e.target instanceof Element&&this._overlayChecker&&e.target.classList.contains("modal__wrap"))return e.preventDefault(),this._overlayChecker=!this._overlayChecker,void this.close();this._overlayChecker=!1}))),window.addEventListener("keydown",(e=>{if(!this._isMoved&&this.config.closeOnEsc&&27===e.which&&this.isOpened)return e.preventDefault(),void this.close();!this._isMoved&&this.config.catchFocus&&9===e.which&&this.isOpened&&this.focusCatcher(e)}))}open(e){if(e&&(this._nextWindows="string"==typeof e?document.querySelector(e):e),this._nextWindows){if(this.isOpened)return this._reopenTrigger=!0,void this.close();this.openedWindow=this._nextWindows,this._modalBlock=this.openedWindow.querySelector(".hystmodal__window"),this.config.beforeOpen(this),this._bodyScrollControl(),this.shadow.classList.add("modal__shadow--show"),this.openedWindow.classList.add("modal--active"),this.openedWindow.setAttribute("aria-hidden","false"),this.config.catchFocus&&this.focusControl(),this.isOpened=!0}else console.log("Warning: hystModal selector is not found")}close(){this.isOpened&&(this.config.waitTransitions?(this.openedWindow.classList.add("modal--moved"),this._isMoved=!0,this.openedWindow.addEventListener("transitionend",this._closeAfterTransition),this.openedWindow.classList.remove("modal--active")):(this.openedWindow.classList.remove("modal--active"),this._closeAfterTransition()))}_closeAfterTransition(){this.openedWindow.classList.remove("modal--moved"),this.openedWindow.removeEventListener("transitionend",this._closeAfterTransition),this._isMoved=!1,this.shadow.classList.remove("modal__shadow--show"),this.openedWindow.setAttribute("aria-hidden","true"),this.config.catchFocus&&this.focusControl(),this._bodyScrollControl(),this.isOpened=!1,this.openedWindow.scrollTop=0,this.config.afterClose(this),this._reopenTrigger&&(this._reopenTrigger=!1,this.open())}focusControl(){const e=this.openedWindow.querySelectorAll(this._focusElements);this.isOpened&&this.starter?this.starter.focus():e.length&&e[0].focus()}focusCatcher(e){const t=this.openedWindow.querySelectorAll(this._focusElements),s=Array.prototype.slice.call(t);if(this.openedWindow.contains(document.activeElement)){const t=s.indexOf(document.activeElement);e.shiftKey&&0===t&&(s[s.length-1].focus(),e.preventDefault()),e.shiftKey||t!==s.length-1||(s[0].focus(),e.preventDefault())}else s[0].focus(),e.preventDefault()}_bodyScrollControl(){if(!this.config.backscroll)return;const e=document.querySelectorAll(this.config.fixedSelectors),t=Array.prototype.slice.call(e),s=document.documentElement;if(!0===this.isOpened)return s.classList.remove("modal__opened"),s.style.marginRight="",t.forEach((e=>{e.style.marginRight=""})),window.scrollTo(0,this._scrollPosition),void(s.style.top="");this._scrollPosition=window.pageYOffset;const i=window.innerWidth-s.clientWidth;s.style.top="".concat(-this._scrollPosition,"px"),i&&(s.style.marginRight="".concat(i,"px"),t.forEach((e=>{e.style.marginRight="".concat(parseInt(getComputedStyle(e).marginRight,10)+i,"px")}))),s.classList.add("modal__opened")}}const myModal=new HystModal({closeOnEsc:!0,backscroll:!0,beforeOpen:function(e){console.log("Message before opening the modal"),console.log(e)},afterClose:function(e){console.log("Message after modal has closed"),console.log(e);let t=e.openedWindow.querySelector("iframe");t&&t.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")}});if(window.innerWidth<=1151){new Swiper(".js-reviews-slider",{slidesPerView:4,spaceBetween:30,breakpoints:{320:{slidesPerView:1.2,spaceBetween:10},380:{slidesPerView:1.5,spaceBetween:10},430:{slidesPerView:1.7,spaceBetween:15},455:{slidesPerView:1.9,spaceBetween:15},530:{slidesPerView:2,spaceBetween:15},745:{slidesPerView:3,spaceBetween:20}}})}const skeletonThumbs=new Swiper(".js-skeleton-thumbs",{spaceBetween:10,slidesPerView:3,allowTouchMove:!1,watchSlidesProgress:!0}),skeletonGallery=new Swiper(".js-skeleton-gallery",{spaceBetween:10,effect:"fade",fadeEffect:{crossFade:!0},allowTouchMove:!1,thumbs:{swiper:skeletonThumbs}});function findElements(e,t){const s=e;s.element=t,s.target=t.nextElementSibling}function hideElement(e){const t=e,{target:s}=t;t.element.classList.remove("faq__question--active"),s.style.height=null,t.isActive=!1}function showElement(e){const t=e,{target:s,height:i}=t;t.element.classList.add("faq__question--active"),s.style.height="".concat(i,"px"),t.isActive=!0}function changeElementStatus(e){e.isActive?hideElement(e):showElement(e)}function measureHeight(e){e.target.height=e.target.clientHeight}function subscribe(e){e.element.addEventListener("click",(t=>{t.preventDefault(),changeElementStatus(e)})),window.addEventListener("resize",(()=>measureHeight(e)))}function accordion(e){const t={};findElements(t,e),measureHeight(t),subscribe(t)}const elements=[...document.querySelectorAll(".js-accordion-faq")];elements&&elements.forEach(accordion);
//# sourceMappingURL=all.min.js.map
